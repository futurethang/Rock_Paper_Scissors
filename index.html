<!DOCTYPE html>
<html lang="en">
<head>
  <title>ROCK. PAPER. SCISSORS.</title><!-- Required meta tags -->
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <link href="https://fonts.googleapis.com/css?family=Baloo+Bhai|Bungee+Inline|Fredoka+One|Special+Elite" rel="stylesheet"><!-- Bootstrap CSS -->
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.2/css/bootstrap.min.css" rel="stylesheet">
  <link href="style.css" rel="stylesheet">
</head>
<body>
  <div class="container">
    <div class="row score_row">
      <div class="col-md-6">
        <div class="card score_card" style="width: 18rem;">
          <div class="card-body">
            <h5 class="card-title">YOU:</h5><img alt="rock paper scissors image" class="game_image" id="user_image" src="images/placeholder.jpg">
            <h1 class="text_result" id="user"></h1><span class="text_result">score:</span> <span class="score_keep" id="userScore"></span>
          </div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="card score_card" style="width: 18rem;">
          <div class="card-body">
            <h5 class="card-title">COMPUTER:</h5><img alt="rock paper scissors image" class="game_image" id="cpu_image" src="images/placeholder.jpg">
            <h1 class="text_result" id="computer"></h1><span class="text_result">score:</span> <span class="score_keep" id="computerScore"></span>
          </div>
        </div>
      </div>
    </div>
    <div class="row next_throw">
      <div class="col-md-12 next_throw">
        <a class="btn btn-primary" href="#" id="rock" name="" role="button">Rock</a> <a class="btn btn-primary" href="#" id="paper" name="" role="button">Paper</a> <a class="btn btn-primary" href="#" id="scissors" name="" role="button">Scissors</a>
      </div>
    </div>
    <div class="row result">
      <div class="col-md-8">
        <span class="result_text" id="result"></span>
      </div>
    </div>
    <div class="row game_count">
      <div class="col-md-8">
        Games Played: <span class="game_count_text" id="games"></span>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12">
        <div id="game"></div>
      </div>
    </div>
  </div>
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script> 
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script> 
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.2/js/bootstrap.min.js"></script>
  <script src="https://www.gstatic.com/firebasejs/5.5.2/firebase.js">
  </script> 

<!-- INITIALIZE FIREBASE -->
  <script>
                                var config = {
                                    apiKey: "AIzaSyD5-SyabL6PhCSNtNtYk4P4MMTzwdEJWsU",
                                    authDomain: "rock-paper-scissors-a1395.firebaseapp.com",
                                    databaseURL: "https://rock-paper-scissors-a1395.firebaseio.com",
                                    projectId: "rock-paper-scissors-a1395",
                                    storageBucket: "",
                                    messagingSenderId: "556958634970"
                                };
                                firebase.initializeApp(config);
  </script> 

  <script type="text/javascript">
                                // HTML WRITING VARIABLES
                                var userText = document.getElementById("user");
                                var computerText = document.getElementById("computer");
                                var result = document.getElementById("result");
                                var userScore = document.getElementById("userScore");
                                var computerScore = document.getElementById("computerScore");
                                var html_user_image = document.getElementById("user_image");
                                var html_cpu_image = document.getElementById("cpu_image");
                                var num_games = document.getElementById("games");

                                // SET THE USER AND COMPUTER VARIABLES      
                                var computerChoices = ["r", "p", "s"];
                                var userScore_count = 0;
                                var computerScore_count = 0;
                                var num_games_count = 0;
                                var userGuess;
                                var computerGuess = function () { return computerChoices[Math.floor(Math.random() * computerChoices.length)]; }
                                var computerReturn = function (play) {
                                    var text;
                                    switch (play) {
                                        case "r":
                                            text = "ROCK"
                                            html_cpu_image.src = "images/rock.jpg"
                                            break;
                                        case "p":
                                            text = "PAPER"
                                            html_cpu_image.src = "images/paper.jpg"
                                            break;
                                        case "s":
                                            text = "SCISSORS"
                                            html_cpu_image.src = "images/scissors.jpg"
                                            break;
                                    }
                                    return text;
                                }

                                // USER PLAYS ROCK
                                // $("#rock").on("click", )
                                document.getElementById("rock").onclick = function () {
                                    userGuess = "r";
                                    userText.textContent = "ROCK";
                                    html_user_image.src = "images/rock.jpg"
                                    console.log(computerGuess());

                                    let play = computerGuess();
                                    computerText.textContent = computerReturn(play);

                                    return game(userGuess, play);
                                }

                                // USER PLAYS PAPER

                                document.getElementById("paper").onclick = function () {
                                    userGuess = "p";
                                    userText.textContent = "PAPER";
                                    html_user_image.src = "images/paper.jpg"
                                    console.log(computerGuess());

                                    let play = computerGuess();
                                    computerText.textContent = computerReturn(play);

                                    return game(userGuess, play);
                                }

                                // USER PLAYS SCISSORS

                                document.getElementById("scissors").onclick = function () {
                                    userGuess = "s";
                                    userText.textContent = "SCISSORS";
                                    html_user_image.src = "images/scissors.jpg"
                                    console.log(computerGuess());

                                    let play = computerGuess();
                                    computerText.textContent = computerReturn(play);

                                    return game(userGuess, play);
                                }

                                // THIS FUNCTION RUNS THE GAME CONDITIONS

                                let game = function (user, computer) {
                                    num_games_count++;
                                    num_games.textContent = num_games_count;

                                    if (user == computer) {
                                        result.textContent = "Tie!";
                                        result.style = "color: rgb(99, 189, 187)";
                                    } else if (user == "r") {
                                        if (computer == "s") {
                                            userScore_count = userScore_count + 1;
                                            // userScore_count ++;
                                            result.textContent = "WIN";
                                            result.style = "color: rgb(245, 188, 74)";
                                            console.log(userScore_count);
                                        } else if (computer == "p") {
                                            computerScore_count = computerScore_count + 1;
                                            result.textContent = "YOU LOSE";
                                            result.style = "color: rgb(243, 102, 82)";
                                        }
                                    } else if (user == "p") {
                                        if (computer == "r") {
                                            userScore_count = userScore_count + 1;
                                            result.textContent = "WIN";
                                            result.style = "color: rgb(245, 188, 74)";
                                            console.log(userScore_count);
                                        } else if (computer == "s") {
                                            computerScore_count = computerScore_count + 1;
                                            result.textContent = "YOU LOSE";
                                            result.style = "color: rgb(243, 102, 82)";
                                        }
                                    } else if (user == "s") {
                                        if (computer == "p") {
                                            userScore_count++;
                                            result.textContent = "WIN";
                                            result.style = "color: rgb(245, 188, 74)";
                                        } else if (computer == "r") {
                                            computerScore_count = computerScore_count + 1;
                                            result.textContent = "YOU LOSE";
                                            result.style = "color: rgb(243, 102, 82)";
                                        }
                                    }
                                    userScore.textContent = userScore_count;
                                    computerScore.textContent = computerScore_count;
                                }

  </script> <!-- Optional JavaScript -->
</body>
</html>